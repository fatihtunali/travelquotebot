{
  "permissions": {
    "allow": [
      "Bash(ssh fatih@31.141.246.227 \"bash manage-funny-ai.sh restart && sleep 3 && curl -s http://localhost:8001/health | head -5\")",
      "Bash(ssh root@188.132.230.193 \"find /home/ruzgargucu/.next -name ''*itinerary*'' -type f 2>/dev/null | grep -v ''cache'' | head -5\")",
      "Bash(ssh root@188.132.230.193 \"grep -r ''ruzgargucu-default'' /home/ruzgargucu/.next/server/ 2>/dev/null | head -3\")",
      "Bash(ssh root@188.132.230.193 \"find /home/ruzgargucu -name ''*.tsx'' -o -name ''*.ts'' | xargs grep -l ''/api/funny-ai/generate'' 2>/dev/null\")",
      "Bash(ssh root@188.132.230.193 \"ls -la /home/ruzgargucu/app/ | grep -i saved\")",
      "Bash(ssh root@188.132.230.193 \"grep -r ''funny-ai'' /home/ruzgargucu/app/saved-itineraries/ 2>/dev/null\")",
      "Bash(ssh root@188.132.230.193 \"pm2 restart pricing && sleep 2 && pm2 list | grep pricing\")",
      "Bash(scp \"C:/Users/fatih/Desktop/travelquotebot/tqb_ai_generator.py\" fatih@31.141.246.227:/home/fatih/travelquotebot-ai/)",
      "Bash(scp \"C:/Users/fatih/Desktop/travelquotebot/tqb_ai_api_server.py\" fatih@31.141.246.227:/home/fatih/travelquotebot-ai/)",
      "Bash(ssh fatih@31.141.246.227 \"cd ~/travelquotebot-ai && cat > ecosystem.config.js << ''EOFECO''\nmodule.exports = {\n  apps: [{\n    name: ''tqb-ai'',\n    script: ''./venv/bin/python'',\n    args: ''tqb_ai_api_server.py'',\n    cwd: ''/home/fatih/travelquotebot-ai'',\n    instances: 1,\n    autorestart: true,\n    watch: false,\n    max_memory_restart: ''1G'',\n    env: {\n      PYTHONUNBUFFERED: ''1''\n    }\n  }]\n};\nEOFECO\necho ''PM2 config updated!''\")",
      "Bash(ssh fatih@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && cd ~/travelquotebot-ai && pm2 delete tqb-ai && pm2 start ecosystem.config.js && sleep 3 && pm2 list\")",
      "Bash(ssh fatih@31.141.246.227 \"curl -s http://localhost:8001/health | python3 -m json.tool\")",
      "Bash(ssh fatih@31.141.246.227 \"curl -s -X POST http://localhost:8001/tqb-ai/generate-itinerary \\\n  -H ''Content-Type: application/json'' \\\n  -d ''{\n    \"\"operator_id\"\": \"\"ed58206d-f600-483b-b98a-79805310e9be\"\",\n    \"\"days\"\": 2,\n    \"\"cities\"\": [\"\"Istanbul\"\"],\n    \"\"tour_type\"\": \"\"Private\"\",\n    \"\"pax\"\": 2,\n    \"\"interests\"\": [\"\"history\"\"],\n    \"\"start_date\"\": \"\"2025-08-01\"\",\n    \"\"budget\"\": \"\"moderate\"\"\n  }'' --max-time 120 | python3 -m json.tool | head -30\")",
      "Bash(ssh -o ConnectTimeout=10 tqb@31.141.246.227 \"pwd && ls -la\")",
      "Bash(ssh -o ConnectTimeout=10 tqb@31.141.246.247 \"pwd && ls -la\")",
      "Bash(ssh tqb@31.141.246.227 \"cd travelquotebot-ai && ls -la\")",
      "Bash(ssh tqb@31.141.246.227 \"cd travelquotebot-ai && cat tqb_db_connector.py\")",
      "Bash(scp \"C:/Users/fatih/Desktop/travelquotebot/tqb_db_connector.py\" tqb@31.141.246.227:~/travelquotebot-ai/)",
      "Bash(scp \"C:/Users/fatih/Desktop/travelquotebot/tqb_ai_api_server.py\" tqb@31.141.246.227:~/travelquotebot-ai/)",
      "Bash(scp \"C:/Users/fatih/Desktop/travelquotebot/tqb_ai_generator.py\" tqb@31.141.246.227:~/travelquotebot-ai/)",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && cd ~/travelquotebot-ai && pm2 list\")",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && cd ~/travelquotebot-ai && pm2 restart tqb-ai && sleep 3 && pm2 logs tqb-ai --lines 20 --nostream\")",
      "Bash(ssh tqb@31.141.246.227 \"mysql -h 188.132.230.193 -u tqb -p''Dlr235672.-Yt'' -D tqb_db -e \"\"SELECT id, company_name, subdomain FROM operators LIMIT 3;\"\"\")",
      "Bash(ssh tqb@31.141.246.227 \"curl -s -X POST http://localhost:8001/tqb-ai/generate-itinerary -H ''Content-Type: application/json'' -d ''{\"\"operator_id\"\": \"\"ed58206d-f600-483b-b98a-79805310e9be\"\", \"\"days\"\": 2, \"\"cities\"\": [\"\"Istanbul\"\"], \"\"tour_type\"\": \"\"Private\"\", \"\"pax\"\": 2, \"\"interests\"\": [\"\"history\"\"], \"\"start_date\"\": \"\"2025-06-01\"\"}'' | head -50\")",
      "Bash(curl -s -X POST https://api.travelquotebot.com/tqb-ai/generate-itinerary -H \"Content-Type: application/json\" -d \"{\"\"operator_id\"\": \"\"ed58206d-f600-483b-b98a-79805310e9be\"\", \"\"days\"\": 3, \"\"cities\"\": [\"\"Istanbul\"\", \"\"Cappadocia\"\"], \"\"tour_type\"\": \"\"Private\"\", \"\"pax\"\": 2, \"\"interests\"\": [\"\"history\"\", \"\"culture\"\"], \"\"start_date\"\": \"\"2025-07-15\"\", \"\"budget\"\": \"\"moderate\"\"}\" --max-time 60)",
      "Bash(python3 -m json.tool)",
      "Bash(curl -s -X POST https://api.travelquotebot.com/tqb-ai/generate-itinerary -H \"Content-Type: application/json\" -d \"{\"\"operator_id\"\": \"\"ed58206d-f600-483b-b98a-79805310e9be\"\", \"\"days\"\": 2, \"\"cities\"\": [\"\"Istanbul\"\"], \"\"pax\"\": 2, \"\"interests\"\": [\"\"history\"\"], \"\"start_date\"\": \"\"2025-06-01\"\"}\" --max-time 120 -v)",
      "Bash(ssh root@188.132.230.193 \"cat /home/ruzgargucu/app/api/quotes/[id]/itinerary/route.ts\")",
      "Bash(ssh tqb@31.141.246.227 \"ls -la /etc/nginx/sites-available/ 2>/dev/null || ls -la /etc/nginx/conf.d/ 2>/dev/null || echo ''Need root access''\")",
      "Bash(ssh tqb@31.141.246.227 \"cat /etc/nginx/sites-available/tqb-ai\")",
      "Bash(ssh tqb@31.141.246.227 \"sudo sed -i ''s/proxy_read_timeout 90s;/proxy_read_timeout 180s;/'' /etc/nginx/sites-available/tqb-ai && sudo sed -i ''s/proxy_send_timeout 60s;/proxy_send_timeout 180s;/'' /etc/nginx/sites-available/tqb-ai && sudo sed -i ''s/proxy_connect_timeout 10s;/proxy_connect_timeout 30s;/'' /etc/nginx/sites-available/tqb-ai\")",
      "Bash(ssh root@188.132.230.193 \"ssh root@31.141.246.227 ''sed -i \"\"s/proxy_read_timeout 90s;/proxy_read_timeout 180s;/\"\" /etc/nginx/sites-available/tqb-ai && sed -i \"\"s/proxy_send_timeout 60s;/proxy_send_timeout 180s;/\"\" /etc/nginx/sites-available/tqb-ai && sed -i \"\"s/proxy_connect_timeout 10s;/proxy_connect_timeout 30s;/\"\" /etc/nginx/sites-available/tqb-ai && cat /etc/nginx/sites-available/tqb-ai | grep -A2 \"\"Timeouts for AI\"\"''\")",
      "Bash(curl -s -X POST https://api.travelquotebot.com/tqb-ai/generate-itinerary -H \"Content-Type: application/json\" -d \"{\"\"operator_id\"\": \"\"ed58206d-f600-483b-b98a-79805310e9be\"\", \"\"days\"\": 2, \"\"cities\"\": [\"\"Istanbul\"\"], \"\"tour_type\"\": \"\"Private\"\", \"\"pax\"\": 2, \"\"interests\"\": [\"\"history\"\"], \"\"start_date\"\": \"\"2025-06-01\"\"}\" --max-time 180)",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && cd ~/travelquotebot-ai && pm2 restart tqb-ai && sleep 3 && pm2 logs tqb-ai --lines 10 --nostream\")",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && cd ~/travelquotebot-ai && pm2 restart tqb-ai && sleep 3 && pm2 logs tqb-ai --lines 15 --nostream\")",
      "Bash(ssh tqb@31.141.246.227 \"mysql -h 188.132.230.193 -u tqb -p''Dlr235672.-Yt'' -D tqb_db -e \"\"SELECT name, base_price_per_night, star_rating FROM accommodations WHERE city=''Istanbul'' AND is_active=1 LIMIT 5;\"\"\")",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && cd ~/travelquotebot-ai && pm2 restart tqb-ai\")",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && cd ~/travelquotebot-ai && pm2 restart tqb-ai && sleep 2 && echo ''Service restarted''\")",
      "Bash(curl -s -X POST https://api.travelquotebot.com/tqb-ai/generate-itinerary -H \"Content-Type: application/json\" -d \"{\"\"operator_id\"\": \"\"ed58206d-f600-483b-b98a-79805310e9be\"\", \"\"days\"\": 3, \"\"cities\"\": [\"\"Istanbul\"\"], \"\"tour_type\"\": \"\"Private\"\", \"\"pax\"\": 2, \"\"interests\"\": [\"\"history\"\", \"\"culture\"\"], \"\"start_date\"\": \"\"2025-07-15\"\", \"\"budget\"\": \"\"moderate\"\"}\" --max-time 180)",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && cd ~/travelquotebot-ai && pm2 restart tqb-ai && sleep 3 && echo ''Ready to test''\")",
      "Bash(curl -s -X POST https://api.travelquotebot.com/tqb-ai/generate-itinerary -H \"Content-Type: application/json\" -d \"{\"\"operator_id\"\": \"\"ed58206d-f600-483b-b98a-79805310e9be\"\", \"\"days\"\": 2, \"\"cities\"\": [\"\"Istanbul\"\"], \"\"pax\"\": 2, \"\"interests\"\": [\"\"history\"\"], \"\"start_date\"\": \"\"2025-06-01\"\"}\" --max-time 180)",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && cd ~/travelquotebot-ai && pm2 restart tqb-ai && sleep 3 && echo ''Ready!''\")",
      "Bash(npm run dev)",
      "Bash(curl -s http://localhost:3000/api/health)",
      "Bash(node test-professional-quote.js)",
      "Bash(node test-end-to-end.js)",
      "Bash(scp \"C:/Users/fatih/Desktop/travelquotebot/tqb_ai_generator_fixed.py\" tqb@31.141.246.227:~/travelquotebot-ai/tqb_ai_generator.py)",
      "Bash(ssh tqb@31.141.246.227 \"ls -lh ~/travelquotebot-ai/tqb_ai_generator.py && python3 -m py_compile ~/travelquotebot-ai/tqb_ai_generator.py && echo ''Syntax check passed!''\")",
      "Bash(ssh tqb@31.141.246.227 \"python3 -m py_compile ~/travelquotebot-ai/tqb_ai_generator.py && echo ''Syntax OK!''\")",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && pm2 restart tqb-ai && sleep 3 && echo ''Service restarted''\")",
      "Bash(ssh tqb@31.141.246.227 \"curl -s http://localhost:8001/health | head -5\")",
      "Bash(curl -s -X POST http://localhost:3000/api/itinerary/generate )",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && pm2 logs tqb-ai --lines 15 --nostream\")",
      "Bash(ssh tqb@31.141.246.227 \"head -50 ~/travelquotebot-ai/tqb_ai_generator.py | tail -15\")",
      "Bash(ssh tqb@31.141.246.227 \"cd ~/travelquotebot-ai && ls -la *.backup\")",
      "Bash(ssh tqb@31.141.246.227 \"cd ~/travelquotebot-ai && cp tqb_ai_generator.py.backup tqb_ai_generator.py\")",
      "Bash(ssh tqb@31.141.246.227 'cd ~/travelquotebot-ai && sed -i \"\"s/num_predict\\\"\": 8192/num_predict\\\"\": 16000/\"\" tqb_ai_generator.py && sed -i \"\"s/\\\"\"stream\\\"\": False/\\\"\"stream\\\"\": False, \\\"\"format\\\"\": \\\"\"json\\\"\"/\"\" tqb_ai_generator.py && echo \"\"File updated\"\"')",
      "Bash(ssh tqb@31.141.246.227 \"python3 -m py_compile ~/travelquotebot-ai/tqb_ai_generator.py && echo ''Syntax OK''\")",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && pm2 restart tqb-ai && sleep 2 && pm2 list | grep tqb-ai\")",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && pm2 logs tqb-ai --lines 20 --nostream\")",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && pm2 logs tqb-ai --lines 5 --nostream | grep -A2 ''Error\\|SUCCESS\\|200 OK''\")",
      "Bash(ssh tqb@31.141.246.227 \"tail -30 ~/.pm2/logs/tqb-ai-out.log | grep -E ''Generating|Error|SUCCESS|200 OK|generate-itinerary''\")",
      "Bash(npm run build)",
      "Bash(node test-narrative-itinerary.js)",
      "Bash(node monitor-generation.js)",
      "Bash(npm uninstall html2canvas)",
      "Bash(npm install html-to-image)",
      "Bash(npm install @react-pdf/renderer)",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && pm2 logs tqb-ai --lines 80 --nostream | tail -50\")",
      "Bash(ssh root@188.132.230.193 \"ssh root@31.141.246.227 ''sed -i \"\"s/proxy_read_timeout 180s;/proxy_read_timeout 300s;/\"\" /etc/nginx/sites-available/tqb-ai && sed -i \"\"s/proxy_send_timeout 180s;/proxy_send_timeout 300s;/\"\" /etc/nginx/sites-available/tqb-ai && sed -i \"\"s/proxy_connect_timeout 30s;/proxy_connect_timeout 60s;/\"\" /etc/nginx/sites-available/tqb-ai && cat /etc/nginx/sites-available/tqb-ai | grep -A3 \"\"Timeouts for AI\"\"''\")",
      "Bash(curl -s https://api.travelquotebot.com/health)",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && pm2 logs tqb-ai --lines 30 --nostream\")",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && pm2 logs tqb-ai --lines 10 --nostream | tail -20\")",
      "Bash(ssh tqb@31.141.246.227 \"source ~/.bashrc && source ~/.nvm/nvm.sh && pm2 logs tqb-ai --lines 15 --nostream | tail -25\")",
      "Bash(ssh root@188.132.230.193 \"mysql -D ruzgargucu_ruzgar -e \"\"DESCRIBE training_itineraries;\"\"\")",
      "Bash(ssh root@188.132.230.193 \"mysql -D ruzgargucu_ruzgar -e \"\"SELECT id, name, description, CHAR_LENGTH(itinerary_json) as json_length FROM training_itineraries LIMIT 10;\"\"\")",
      "Bash(ssh root@188.132.230.193 \"mysql -D ruzgargucu_ruzgar -e \"\"SELECT id, title, tour_type, days, cities, CHAR_LENGTH(content) as content_length FROM training_itineraries ORDER BY created_at DESC LIMIT 10;\"\"\")",
      "Bash(ssh root@188.132.230.193 \"mysql -D tqb_db -e \"\"\nCREATE TABLE IF NOT EXISTS training_itineraries (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  title VARCHAR(500) NOT NULL,\n  tour_type ENUM(''Private'',''SIC'') NOT NULL,\n  days INT NOT NULL,\n  cities TEXT,\n  content LONGTEXT NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_days (days),\n  INDEX idx_tour_type (tour_type)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n\"\"\")",
      "Bash(ssh root@188.132.230.193 \"mysql -e \"\"\nINSERT INTO tqb_db.training_itineraries (title, tour_type, days, cities, content, created_at)\nSELECT title, tour_type, days, cities, content, created_at \nFROM ruzgargucu_ruzgar.training_itineraries;\n\"\"\")",
      "Bash(ssh root@188.132.230.193 \"mysql -D tqb_db -e \"\"SELECT COUNT(*) as total_examples, MIN(days) as min_days, MAX(days) as max_days FROM training_itineraries;\"\"\")"
    ],
    "deny": [],
    "ask": []
  }
}
